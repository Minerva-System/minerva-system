<!DOCTYPE HTML>
<html lang="pt-br" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Executar com recursos da máquina - Minerva System</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introdução</a></li><li class="chapter-item expanded "><a href="CHANGELOG.html"><strong aria-hidden="true">2.</strong> Changelog</a></li><li class="chapter-item expanded "><a href="estrutura.html"><strong aria-hidden="true">3.</strong> Estrutura geral do projeto</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="frontend.html"><strong aria-hidden="true">3.1.</strong> Front-End</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="interface-plan9.html"><strong aria-hidden="true">3.1.1.</strong> Interface para Plan 9 from Bell Labs</a></li><li class="chapter-item expanded "><a href="interface-terminal.html"><strong aria-hidden="true">3.1.2.</strong> Interface para Terminal</a></li></ol></li><li class="chapter-item expanded "><a href="backend.html"><strong aria-hidden="true">3.2.</strong> Back-End</a></li></ol></li><li class="chapter-item expanded "><a href="documentacao.html"><strong aria-hidden="true">4.</strong> Documentação do Software</a></li><li class="chapter-item expanded "><a href="especificacao-intro.html"><strong aria-hidden="true">5.</strong> Especificação do Projeto</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="multi-tenancy.html"><strong aria-hidden="true">5.1.</strong> Multi-Tenancy</a></li><li class="chapter-item expanded "><a href="banco-relacional.html"><strong aria-hidden="true">5.2.</strong> Banco de Dados Relacional</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="migrations.html"><strong aria-hidden="true">5.2.1.</strong> Executando migrations</a></li></ol></li><li class="chapter-item expanded "><a href="banco-nao-relacional.html"><strong aria-hidden="true">5.3.</strong> Banco de Dados Não-Relacional</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="colecoes.html"><strong aria-hidden="true">5.3.1.</strong> Coleções</a></li></ol></li><li class="chapter-item expanded "><a href="cache-redis.html"><strong aria-hidden="true">5.4.</strong> Cache</a></li><li class="chapter-item expanded "><a href="mensageria-rabbitmq.html"><strong aria-hidden="true">5.5.</strong> Mensageria</a></li><li class="chapter-item expanded "><a href="logs-fluentd.html"><strong aria-hidden="true">5.6.</strong> Coleta de Logs</a></li><li class="chapter-item expanded "><a href="diagramas-intro.html"><strong aria-hidden="true">5.7.</strong> Diagramas de Arquitetura</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="diagramas/casos-de-uso.html"><strong aria-hidden="true">5.7.1.</strong> Diagramas de Caso de Uso</a></li><li class="chapter-item expanded "><a href="diagramas-sequencia.html"><strong aria-hidden="true">5.7.2.</strong> Diagramas de Sequência</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="diagramas-sequencia-sessao.html"><strong aria-hidden="true">5.7.2.1.</strong> Sessão (SESSION)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="diagramas/login.html"><strong aria-hidden="true">5.7.2.1.1.</strong> Login do usuário</a></li><li class="chapter-item expanded "><a href="diagramas/logoff.html"><strong aria-hidden="true">5.7.2.1.2.</strong> Logoff do usuário</a></li></ol></li><li class="chapter-item expanded "><a href="diagramas-sequencia-usuarios.html"><strong aria-hidden="true">5.7.2.2.</strong> Usuários (USER)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="diagramas/cadastro-usuarios.html"><strong aria-hidden="true">5.7.2.2.1.</strong> Cadastro de usuários</a></li><li class="chapter-item expanded "><a href="diagramas/lista-usuarios.html"><strong aria-hidden="true">5.7.2.2.2.</strong> Listagem de usuários</a></li><li class="chapter-item expanded "><a href="diagramas/consultar-usuarios.html"><strong aria-hidden="true">5.7.2.2.3.</strong> Consultar usuário</a></li><li class="chapter-item expanded "><a href="diagramas/alteracao-usuarios.html"><strong aria-hidden="true">5.7.2.2.4.</strong> Alteração de cadastro de usuários</a></li><li class="chapter-item expanded "><a href="diagramas/remocao-usuarios.html"><strong aria-hidden="true">5.7.2.2.5.</strong> Remoção de usuários</a></li></ol></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="compilacao.html"><strong aria-hidden="true">6.</strong> Compilação</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="executar-maquina.html" class="active"><strong aria-hidden="true">6.1.</strong> Executar com recursos da máquina</a></li><li class="chapter-item expanded "><a href="gerando-imagens.html"><strong aria-hidden="true">6.2.</strong> Gerando imagens via Docker</a></li><li class="chapter-item expanded "><a href="sonarqube.html"><strong aria-hidden="true">6.3.</strong> SonarQube e Quality Gates</a></li></ol></li><li class="chapter-item expanded "><a href="deploy.html"><strong aria-hidden="true">7.</strong> Deploy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="deploy-compose.html"><strong aria-hidden="true">7.1.</strong> Deploy via Docker Compose</a></li><li class="chapter-item expanded "><a href="deploy-swarm.html"><strong aria-hidden="true">7.2.</strong> Deploy via Docker Swarm + Vagrant</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="deploy-swarm-machine.html"><strong aria-hidden="true">7.2.1.</strong> Deploy via Docker Swarm + Docker Machine</a></li></ol></li><li class="chapter-item expanded "><a href="deploy-kubernetes.html"><strong aria-hidden="true">7.3.</strong> Deploy via Kubernetes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ferramentas-monitoramento-externas.html"><strong aria-hidden="true">7.3.1.</strong> Monitoramento externo</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="monitoramento-swagger.html"><strong aria-hidden="true">7.3.1.1.</strong> Swagger e RapiDoc</a></li><li class="chapter-item expanded "><a href="monitoramento-grafana.html"><strong aria-hidden="true">7.3.1.2.</strong> Grafana</a></li><li class="chapter-item expanded "><a href="monitoramento-mongodb.html"><strong aria-hidden="true">7.3.1.3.</strong> MongoDB Compass</a></li><li class="chapter-item expanded "><a href="monitoramento-redis.html"><strong aria-hidden="true">7.3.1.4.</strong> RESP.app (para Redis)</a></li><li class="chapter-item expanded "><a href="monitoramento-postgres.html"><strong aria-hidden="true">7.3.1.5.</strong> DBeaver CE (para PostgreSQL)</a></li><li class="chapter-item expanded "><a href="monitoramento-rabbitmq.html"><strong aria-hidden="true">7.3.1.6.</strong> RabbitMQ</a></li><li class="chapter-item expanded "><a href="monitoramento-elasticsearch.html"><strong aria-hidden="true">7.3.1.7.</strong> ElasticSearch</a></li></ol></li><li class="chapter-item expanded "><a href="diagramas/diagrama-arquitetura.html"><strong aria-hidden="true">7.3.2.</strong> Diagramas de arquitetura do cluster</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="diagramas/rest.html"><strong aria-hidden="true">7.3.2.1.</strong> REST</a></li><li class="chapter-item expanded "><a href="diagramas/session.html"><strong aria-hidden="true">7.3.2.2.</strong> SESSION</a></li><li class="chapter-item expanded "><a href="diagramas/user.html"><strong aria-hidden="true">7.3.2.3.</strong> USER</a></li><li class="chapter-item expanded "><a href="diagramas/dispatch.html"><strong aria-hidden="true">7.3.2.4.</strong> DISPATCH</a></li><li class="chapter-item expanded "><a href="diagramas/postgresql.html"><strong aria-hidden="true">7.3.2.5.</strong> PostgreSQL</a></li><li class="chapter-item expanded "><a href="diagramas/mongodb.html"><strong aria-hidden="true">7.3.2.6.</strong> MongoDB</a></li><li class="chapter-item expanded "><a href="diagramas/redis.html"><strong aria-hidden="true">7.3.2.7.</strong> Redis</a></li><li class="chapter-item expanded "><a href="diagramas/rabbitmq.html"><strong aria-hidden="true">7.3.2.8.</strong> RabbitMQ</a></li><li class="chapter-item expanded "><a href="diagramas/prometheus.html"><strong aria-hidden="true">7.3.2.9.</strong> Prometheus</a></li><li class="chapter-item expanded "><a href="diagramas/fluentd.html"><strong aria-hidden="true">7.3.2.10.</strong> Fluentd</a></li><li class="chapter-item expanded "><a href="diagramas/elasticsearch.html"><strong aria-hidden="true">7.3.2.11.</strong> Elasticsearch</a></li><li class="chapter-item expanded "><a href="diagramas/grafana.html"><strong aria-hidden="true">7.3.2.12.</strong> Grafana</a></li><li class="chapter-item expanded "><a href="diagramas/kibana.html"><strong aria-hidden="true">7.3.2.13.</strong> Kibana</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="testes.html"><strong aria-hidden="true">8.</strong> Testes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="testes-unitarios.html"><strong aria-hidden="true">8.1.</strong> Testes unitários</a></li><li class="chapter-item expanded "><a href="testes-integracao.html"><strong aria-hidden="true">8.2.</strong> Testes de integração</a></li><li class="chapter-item expanded "><a href="testes-carga.html"><strong aria-hidden="true">8.3.</strong> Testes de Carga</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Minerva System</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="compilando-e-executando-com-recursos-da-máquina"><a class="header" href="#compilando-e-executando-com-recursos-da-máquina">Compilando e executando com recursos da máquina</a></h1>
<p>Você pode compilar os módulos do sistema individualmente e executá-los
usando o próprio ambiente Rust.</p>
<h2 id="introdução"><a class="header" href="#introdução">Introdução</a></h2>
<p>Este artigo trata da situação mais comum durante o desenvolvimento das
partes do sistema, que envolve utilizá-las individualmente em um
ambiente de desenvolvimento.</p>
<p>O <em>deploy</em> usando Docker Compose e Kubernetes, enquanto possível em
ambiente de homologação e de testes manuais, utiliza muitos recursos
da máquina, e não é o ideal de ser utilizado enquanto o programador
estiver debugando a aplicação. Além disso, pela própria forma como
o sistema foi planejado, é possível executar porções individuais do
sistema em que haja interdependência entre elas.</p>
<h2 id="objetivo"><a class="header" href="#objetivo">Objetivo</a></h2>
<p>Compilar todos os módulos ou módulos individuais é muito importante do
ponto de vista do desenvolvimento. Neste artigo, tratamos de como isso
pode ser feito na máquina local de um desenvolvedor.</p>
<h2 id="dependências"><a class="header" href="#dependências">Dependências</a></h2>
<p>Você precisará de:</p>
<ul>
<li><a href="https://rustup.rs">Rust</a> (compilador <code>rustc</code> e gerenciador de
pacotes <code>cargo</code>, versão 1.60.0 ou superior);</li>
<li><a href="https://diesel.rs">Diesel</a> (versão 1.4.1 ou superior, com suporte
a PostgreSQL);</li>
<li><a href="https://flutter.dev">Flutter</a> (versão 3.0.0 ou superior, canal
<code>stable</code>. Apenas necessário o <em>target</em> de compilação para <code>web</code>);</li>
<li>Dart (versão 2.17.0 ou superior, canal <code>stable</code>);</li>
<li>Docker (versão 2.10 ou superior).</li>
</ul>
<p>O compilador Rust e o Docker são essenciais para compilar os módulos
individuais do <em>back-end</em> do projeto, enquanto o Flutter é importante
para a confecção do <em>front-end</em> da aplicação. Sendo assim, as
dependências podem ser instaladas de acordo com o bom-senso do
desenvolvedor.</p>
<p>O Diesel pode ser instalado através do gerenciador de pacotes <code>cargo</code>,
e sua instalação pode ser consultada em seu site, linkado acima. Além
disso, a linguagem Dart será instalada através do Flutter, de acordo
com as instruções que podem ser encontradas no site do mesmo.</p>
<h2 id="estrutura-do-projeto"><a class="header" href="#estrutura-do-projeto">Estrutura do projeto</a></h2>
<p>O repositório do projeto é um <em>monorepo</em>, isto é, engloba todas as
partes do sistema inteiro. Por isso, as partes relacionadas a <em>back-end</em>
estão dispostas em um <em>Workspace</em>, configurável através das próprias
ferramentas do <code>cargo</code> e da linguagem Rust, enquanto o <em>front-end</em>
encontra-se unicamente no diretório <code>minerva_frontend</code>, e não faz
parte do <em>Workspace</em> em si.</p>
<h2 id="preparação-do-ambiente"><a class="header" href="#preparação-do-ambiente">Preparação do ambiente</a></h2>
<p>A primeira parte a ser executada deverá ser a preparação do ambiente.
Isso inclui a preparação de quaisquer serviços ou bancos de dados
externos que possam ser importantes para a execução da aplicação.</p>
<p>No Sistema Minerva, o serviço <code>RUNONCE</code> é responsável por executar
essas operações, sendo também o serviço que executa <em>migrations</em> no
banco de dados, por exemplo.</p>
<p>Para tanto, precisaremos compilar este módulo específico antes de
qualquer outro. Isso será melhor delineado na seção sobre compilação
do <em>back-end</em>, mas realizaremos uma configuração rápida nesta seção.</p>
<h3 id="criando-recursos-locais-com-docker"><a class="header" href="#criando-recursos-locais-com-docker">Criando recursos locais com Docker</a></h3>
<p>Para executar localmente, o sistema precisa que alguns serviços sejam
instanciados antes de sua execução.</p>
<p>É importante lembrar que os métodos a seguir não são considerados
seguros para persistência de dados. Por isso, use-os apenas com a
finalidade de testes.</p>
<h4 id="usando-recursos-por-meio-externo-kubernetes"><a class="header" href="#usando-recursos-por-meio-externo-kubernetes">Usando recursos por meio externo (Kubernetes)</a></h4>
<p>Caso você não queira executar os serviços essenciais
mais pesados em termos de recursos (PostgreSQL, MongoDB, Redis e
RabbitMQ), poderá reaproveitá-los caso tenha realizado deploy dos
mesmos em Kubernetes. Para tanto, você poderá usar um script
preparado que realiza esse processo. Veja que esse script assume
que você possua a ferramenta <code>kubectl</code> com acesso padrão configurado
para o cluster que seja seu <em>target</em>.</p>
<p>O script encontra-se excepcionalmente em <code>helpers/port-forwards.sh</code>,
na raiz do projeto.</p>
<h4 id="banco-de-dados-relacional"><a class="header" href="#banco-de-dados-relacional">Banco de dados relacional</a></h4>
<p>Como primeira dependência, recomenda-se criar o banco de dados relacional
via Docker. Também seria possível instalar o PostgreSQL 15 na máquina local,
mas o Docker provê a comodidade necessária para o BD.</p>
<p>Para subir o banco de dados relacional, execute o script <code>make_postgres_db.sh</code>
no diretório <code>minerva-runonce</code>, ou execute:</p>
<pre><code class="language-bash">docker run --name minerva-postgres \
       -e POSTGRES_USER=postgres \
       -e POSTGRES_PASSWORD=postgres \
       -p 5432:5432 \
       -d postgres:15-alpine
</code></pre>
<p>O contêiner poderá então ser gerenciado através do Docker, como um contêiner
qualquer.</p>
<h4 id="banco-de-dados-não-relacional"><a class="header" href="#banco-de-dados-não-relacional">Banco de dados não-relacional</a></h4>
<p>Recomenda-se também criar o banco de dados não-relacional via Docker.
Igualmente, é possível instalar o MongoDB 4 por métodos convencionais.</p>
<p>Veja que o MongoDB é usado aqui em sua versão 4 especialmente por ser
mais compatível com ambientes IoT, em especial K3s executando em um
Raspberry Pi 4 Model B, que foi utilizado para testar o deploy em
um cluster Kubernetes.</p>
<p>Para subir o banco de dados não-relacional, execute o script
<code>make_mongo_db.sh</code> no diretório <code>minerva-runonce</code>, ou execute:</p>
<pre><code class="language-bash">docker run --name minerva-mongo \
       -e MONGO_INITDB_ROOT_USERNAME=root \
       -e MONGO_INITDB_ROOT_PASSWORD=mongo \
       -p 27017:27017 \
       -d mongo:4
</code></pre>
<p>Como esperado, o contêiner pode ser gerenciado normalmente através do Docker.</p>
<h4 id="banco-de-dados-in-memory-cache"><a class="header" href="#banco-de-dados-in-memory-cache">Banco de dados <em>in-memory</em> (cache)</a></h4>
<p>Para o uso do serviço de cache, recomenda-se usar diretamente o Redis através
do Docker. Para tanto, execute o script <code>make_redis_db.sh</code> no diretório
<code>minerva-runonce</code>, ou execute:</p>
<pre><code class="language-bash">docker run --name minerva-redis \
       -p 6379:6379 \
       -d redis:7-alpine
</code></pre>
<p>Assim como antes, gerencie o contêiner criado usando o Docker.</p>
<h4 id="broker-de-mensagens-com-gerenciador"><a class="header" href="#broker-de-mensagens-com-gerenciador">Broker de mensagens (com gerenciador)</a></h4>
<p>O <em>message broker</em> RabbitMQ deverá também ser executado através do Docker.
Para a execução do mesmo, todavia, atente-se para o uso de memória elevado
que essa ferramenta possui.</p>
<p>Você poderá executar o script <code>make_rabbitmq.sh</code> no diretório
<code>minerva_runonce</code>, ou simplesmente executar:</p>
<pre><code class="language-bash">docker run --name minerva-rabbitmq \
       -e RABBITMQ_DEFAULT_USER=rabbitmq \
       -e RABBITMQ_DEFAULT_PASS=minerva \
       -p 15672:15672 \
       -p 5672:5672 \
       -d rabbitmq:3-management-alpine
</code></pre>
<h3 id="executando-configuração-inicial-módulo-runonce"><a class="header" href="#executando-configuração-inicial-módulo-runonce">Executando configuração inicial (módulo <code>RUNONCE</code>)</a></h3>
<p>A seguir, execute o módulo <code>RUNONCE</code> para preparar todos os bancos de
dados de <em>tenants</em>, executar as migrations, criar o usuário <code>admin</code>
em cada banco e outras operações em outros serviços também.</p>
<p>Você poderá executar o módulo diretamente a partir da raiz do projeto:</p>
<pre><code class="language-bash">cargo run --bin minerva-runonce
</code></pre>
<p>Caso haja algum problema com o comando anterior (por exemplo, se o
módulo não encontrar o diretório <code>migrations</code>), vá para o diretório do
módulo e execute-o:</p>
<pre><code class="language-bash">cd minerva-runonce
cargo run
</code></pre>
<p>Após a compilação do módulo <code>RUNONCE</code>, o mesmo aguardará o banco de
dados estar pronto para receber as conexões e aplicará as migrations.</p>
<h2 id="compilação-back-end"><a class="header" href="#compilação-back-end">Compilação (<em>Back-end</em>)</a></h2>
<p>Você poderá compilar todos os módulos do projeto de uma só vez, ou
compilar apenas os módulos necessários.</p>
<h3 id="compilando-todos-os-módulos"><a class="header" href="#compilando-todos-os-módulos">Compilando todos os módulos</a></h3>
<p>Para compilar todos os módulos, vá para a raiz do projeto e execute
um comando de compilação para todo o workspace:</p>
<pre><code class="language-bash">cargo build
</code></pre>
<p>De forma similar, você poderá compilar o projeto para produção através
da <em>flag</em> <code>--release</code>:</p>
<pre><code class="language-bash">cargo build --release
</code></pre>
<h3 id="compilando-um-módulo-específico"><a class="header" href="#compilando-um-módulo-específico">Compilando um módulo específico</a></h3>
<p>Existem duas formas de compilar um módulo específico: a partir do
<em>workspace</em> (diretório raiz do repositório) ou a partir do diretório
do módulo específico.</p>
<p>Qualquer módulo pode ser compilado a partir do diretório raiz com um
comando como o mostrado a seguir (substitua <code>&lt;módulo&gt;</code> pelo nome do
diretório do módulo em questão):</p>
<pre><code class="language-bash">cargo build --bin &lt;módulo&gt;
</code></pre>
<p>Isto compilará qualquer módulo que faça parte do <em>workspace</em>, exceto
bibliotecas auxiliares (como <code>minerva-rpc</code>, <code>minerva-data</code> e
<code>minerva-cache</code>) e o <em>front-end</em> (contido em <code>minerva_frontend</code>).</p>
<p>Da mesma forma, você também poderá ir ao diretório do módulo específico
e compilá-lo diretamente; neste caso, a compilação também funcionará
para bibliotecas auxiliares.</p>
<pre><code class="language-bash">cd &lt;módulo&gt;
cargo build
</code></pre>
<p>De forma similar à compilação geral, ambos os comandos também admitem
a <em>flag</em> <code>--release</code> para compilar os módulos para produção.</p>
<h3 id="execução"><a class="header" href="#execução">Execução</a></h3>
<p>É possível executar diretamente um módulo qualquer através do <code>cargo</code>,
o que também implica na sua compilação.</p>
<p>Para executar a partir do diretório do <em>workspace</em> (apenas para
módulos que geram executáveis):</p>
<pre><code class="language-bash">cargo run --bin &lt;módulo&gt;
</code></pre>
<p>Para executar a partir do diretório do módulo em questão:</p>
<pre><code class="language-bash">cd &lt;módulo&gt;
cargo run
</code></pre>
<p>Da mesma forma, é possível compilar e executar os módulos no modo
de produção através da <em>flag</em> <code>--release</code>.</p>
<h3 id="testes"><a class="header" href="#testes">Testes</a></h3>
<p>Para executar testes unitários e integração, basta seguir um processo
similar à execução dos módulos. Testes com binários compilados para
produção podem ser igualmente controlados pela <em>flag</em> <code>--release</code>.</p>
<p>Para executar quaisquer testes, é necessário <strong>garantir</strong> que o
banco de dados esteja acessível e adequadamente configurado.</p>
<pre><code class="language-bash"># Para testar todos os módulos do workspace
cargo test

# Para testar apenas um módulo do workspace
cargo test --bin &lt;módulo&gt;

# Para testar apenas um módulo em seu diretório
cd &lt;módulo&gt;
cargo test
</code></pre>
<h2 id="compilação-front-end"><a class="header" href="#compilação-front-end">Compilação (<em>Front-end</em>)</a></h2>
<p>O front-end é um módulo separado do restante dos módulos, sendo o
sistema que envolve a interface gráfica do Sistema Minerva.</p>
<h3 id="executando-o-projeto-via-console"><a class="header" href="#executando-o-projeto-via-console">Executando o projeto via console</a></h3>
<p>Para executar o projeto via console, basta usar a ferramenta de linha
de comando do Flutter.</p>
<h4 id="preparando-o-flutter"><a class="header" href="#preparando-o-flutter">Preparando o Flutter</a></h4>
<p>Antes de mais nada, garanta que o Flutter esteja configurado para
compilar projetos Web:</p>
<pre><code class="language-bash">flutter config --enable-web
</code></pre>
<p>Além disso, o Google Chrome deverá estar disponível para ser utilizado
no debug. O estado do ambiente Flutter pode ser verificado com o
comando <code>flutter doctor</code>.</p>
<p>Caso haja alguma inconsistência no seu ambiente, veja a seção de
<a href="https://docs.flutter.dev/get-started/web">preparação do Flutter para Web</a>
na documentação oficial.</p>
<h4 id="executando-o-projeto"><a class="header" href="#executando-o-projeto">Executando o projeto</a></h4>
<p>Para executar o projeto, vá até o diretório do módulo de <em>front-end</em>,
baixe as dependências necessárias, e então execute o projeto no Google
Chrome:</p>
<pre><code class="language-bash">cd minerva_frontend
flutter pub get
flutter run -d chrome
</code></pre>
<h3 id="compilando-para-produção"><a class="header" href="#compilando-para-produção">Compilando para produção</a></h3>
<p>Para compilar o projeto para produção, vá até a pasta do módulo e
execute os comandos a seguir. Eles baixarão as dependências faltantes
(caso já não tenham sido baixadas) e gerarão os arquivos estáticos
da aplicação.</p>
<pre><code class="language-bash">cd minerva_frontend
flutter pub get
flutter build web
</code></pre>
<p>Você poderá encontrar a versão compilada da aplicação <em>front-end</em> no
diretório <code>minerva_frontend/build/web</code>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="compilacao.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="gerando-imagens.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="compilacao.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="gerando-imagens.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
