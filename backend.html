<!DOCTYPE HTML>
<html lang="pt-br" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Back-End - Minerva System</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introdução</a></li><li class="chapter-item expanded "><a href="estrutura.html"><strong aria-hidden="true">2.</strong> Estrutura geral do projeto</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> Front-End</div></li><li class="chapter-item expanded "><a href="backend.html" class="active"><strong aria-hidden="true">2.2.</strong> Back-End</a></li></ol></li><li class="chapter-item expanded "><a href="multi-tenancy.html"><strong aria-hidden="true">3.</strong> Multi-Tenancy</a></li><li class="chapter-item expanded "><a href="banco-relacional.html"><strong aria-hidden="true">4.</strong> Banco de Dados Relacional</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="migrations.html"><strong aria-hidden="true">4.1.</strong> Executando migrations</a></li></ol></li><li class="chapter-item expanded "><a href="banco-nao-relacional.html"><strong aria-hidden="true">5.</strong> Banco de Dados Não-Relacional</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="colecoes.html"><strong aria-hidden="true">5.1.</strong> Coleções</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Regras de Negócio</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="documentacao.html"><strong aria-hidden="true">6.1.</strong> Documentação do Projeto</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Cache de Sessão via Redis</div></li></ol></li><li class="chapter-item expanded "><a href="compilacao.html"><strong aria-hidden="true">7.</strong> Compilação</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="executar-maquina.html"><strong aria-hidden="true">7.1.</strong> Executar com recursos da máquina</a></li><li class="chapter-item expanded "><a href="gerando-imagens.html"><strong aria-hidden="true">7.2.</strong> Gerando imagens via Docker</a></li></ol></li><li class="chapter-item expanded "><a href="deploy.html"><strong aria-hidden="true">8.</strong> Deploy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="deploy-compose.html"><strong aria-hidden="true">8.1.</strong> Deploy via Docker Compose</a></li><li class="chapter-item expanded "><a href="deploy-swarm.html"><strong aria-hidden="true">8.2.</strong> Deploy via Docker Swarm</a></li><li class="chapter-item expanded "><a href="deploy-kubernetes.html"><strong aria-hidden="true">8.3.</strong> Deploy via Kubernetes</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Minerva System</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="back-end"><a class="header" href="#back-end">Back-End</a></h1>
<p>O back-end Minerva compõe-se de microsserviços, com uma interface comum de
comunicação externa que seja simples de usar para os padrões atuais.</p>
<p>O back-end compõe-se dos seguintes componentes:</p>
<ol>
<li>Componente de comunicação externa: um serviço composto de rotas, sendo
portanto uma API REST. Este serviço requisita dados sob demanda a cada
serviço, dependendo do recurso que foi requisitado por via externa. É
efetivamente o intermediário entre Minerva e o mundo externo. As
requisições entre este serviço e os outros deverão ser feito através da
abertura de uma requisição gRPC em que este módulo seja o cliente
requisitante; as respostas recebidas via gRPC são então retornadas
como resposta às requisições recebidas via REST, após tratamento para
serialização como JSON.</li>
<li>Componente de usuários: Servidor gRPC responsável por realizar o CRUD
de usuários e por verificar as regras de negócio destas operações.</li>
<li>Componente de sessão: Servidor gRPC responsável por realizar login,
logoff, verificação de senha e gerenciamento de sessão de usuários.</li>
<li>Componente de produtos: Servidor gRPC responsável por realizar o CRUD
de produtos e por verificar as regras de negócio destas operações.</li>
<li>Componente de estoque: Servidor gRPC responsável por realizar regras
de negócios relacionadas a estoque de produtos (início, baixa, lançamento,
etc).</li>
</ol>
<p>Os <strong>serviços gRPC</strong> supracitados tratam-se de servidores gRPC que podem
receber conexões vindas do ponto de entrada REST ou mesmo entre si. Além
disso, os serviços gRPC devem ser capazes de se comunicar com bancos de
dados, que são recursos essenciais para os mesmos (exemplo: PostgreSQL,
Redis). Além disso, <strong>estes serviços devem gravar log de suas operações</strong>,
mais especificamente nas operações de inserção, atualização e exclusão.</p>
<p>Esses componentes possuem análogos programados, mas não são todos os módulos
da aplicação, que também constituem-se de bibliotecas que podem ser utilizadas
e referenciadas entre si.</p>
<div><!-- Generated by graphviz version 2.43.0 (0)
 --><!-- Title: %3 Pages: 1 --><svg width="512pt" height="393pt"
 viewBox="0.00 0.00 512.00 393.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 389)"><title>%3</title><g id="clust1" class="cluster"><title>cluster_db</title><polygon fill="transparent" stroke="darkmagenta" points="135,-8 135,-98 349,-98 349,-8 135,-8"/><text text-anchor="middle" x="242" y="-82.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">BANCO DE DADOS</text><text text-anchor="middle" x="242" y="-67.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">(multi&#45;tenant)</text></g><g id="clust3" class="cluster"><title>cluster_backend</title><polygon fill="transparent" stroke="darkred" points="8,-146 8,-308 496,-308 496,-146 8,-146"/><text text-anchor="middle" x="252" y="-292.8" font-family="Times,serif" font-size="14.00" fill="darkred">BACK&#45;END</text></g><!-- frontend --><g id="node1" class="node"><title>frontend</title><polygon fill="transparent" stroke="darkorange" points="236,-385 136,-385 136,-349 242,-349 242,-379 236,-385"/><polyline fill="none" stroke="darkorange" points="236,-385 236,-379 "/><polyline fill="none" stroke="darkorange" points="242,-379 236,-379 "/><text text-anchor="middle" x="189" y="-363.3" font-family="Times,serif" font-size="14.00" fill="darkorange">FRONT&#45;END</text></g><!-- rest --><g id="node5" class="node"><title>rest</title><polygon fill="#999999" stroke="green" points="217,-277 165,-277 161,-273 161,-241 213,-241 217,-245 217,-277"/><polyline fill="none" stroke="green" points="213,-273 161,-273 "/><polyline fill="none" stroke="green" points="213,-273 213,-241 "/><polyline fill="none" stroke="green" points="213,-273 217,-277 "/><text text-anchor="middle" x="189" y="-255.3" font-family="Times,serif" font-size="14.00" fill="green">REST</text></g><!-- frontend&#45;&#45;rest --><g id="edge11" class="edge"><title>frontend&#45;&#45;rest</title><path fill="none" stroke="green" d="M189,-348.97C189,-329.31 189,-297.13 189,-277.34"/><text text-anchor="middle" x="209" y="-319.8" font-family="Times,serif" font-size="14.00" fill="green">REST</text></g><!-- db2 --><g id="node2" class="node"><title>db2</title><path fill="#999999" stroke="darkmagenta" d="M341,-48.73C341,-50.53 328.9,-52 314,-52 299.1,-52 287,-50.53 287,-48.73 287,-48.73 287,-19.27 287,-19.27 287,-17.47 299.1,-16 314,-16 328.9,-16 341,-17.47 341,-19.27 341,-19.27 341,-48.73 341,-48.73"/><path fill="none" stroke="darkmagenta" d="M341,-48.73C341,-46.92 328.9,-45.45 314,-45.45 299.1,-45.45 287,-46.92 287,-48.73"/><text text-anchor="middle" x="314" y="-30.3" font-family="Times,serif" font-size="14.00" fill="darkmagenta">inq3</text></g><!-- db1 --><g id="node3" class="node"><title>db1</title><path fill="#999999" stroke="darkmagenta" d="M269,-48.73C269,-50.53 256.9,-52 242,-52 227.1,-52 215,-50.53 215,-48.73 215,-48.73 215,-19.27 215,-19.27 215,-17.47 227.1,-16 242,-16 256.9,-16 269,-17.47 269,-19.27 269,-19.27 269,-48.73 269,-48.73"/><path fill="none" stroke="darkmagenta" d="M269,-48.73C269,-46.92 256.9,-45.45 242,-45.45 227.1,-45.45 215,-46.92 215,-48.73"/><text text-anchor="middle" x="242" y="-30.3" font-family="Times,serif" font-size="14.00" fill="darkmagenta">inq2</text></g><!-- db3 --><g id="node4" class="node"><title>db3</title><path fill="#999999" stroke="darkmagenta" d="M197,-48.73C197,-50.53 184.9,-52 170,-52 155.1,-52 143,-50.53 143,-48.73 143,-48.73 143,-19.27 143,-19.27 143,-17.47 155.1,-16 170,-16 184.9,-16 197,-17.47 197,-19.27 197,-19.27 197,-48.73 197,-48.73"/><path fill="none" stroke="darkmagenta" d="M197,-48.73C197,-46.92 184.9,-45.45 170,-45.45 155.1,-45.45 143,-46.92 143,-48.73"/><text text-anchor="middle" x="170" y="-30.3" font-family="Times,serif" font-size="14.00" fill="darkmagenta">inq1</text></g><!-- user --><g id="node6" class="node"><title>user</title><polygon fill="#999999" stroke="blue" points="75.5,-190 20.5,-190 16.5,-186 16.5,-154 71.5,-154 75.5,-158 75.5,-190"/><polyline fill="none" stroke="blue" points="71.5,-186 16.5,-186 "/><polyline fill="none" stroke="blue" points="71.5,-186 71.5,-154 "/><polyline fill="none" stroke="blue" points="71.5,-186 75.5,-190 "/><text text-anchor="middle" x="46" y="-168.3" font-family="Times,serif" font-size="14.00" fill="blue">USER</text></g><!-- rest&#45;&#45;user --><g id="edge1" class="edge"><title>rest&#45;&#45;user</title><path fill="none" stroke="blue" d="M160.96,-246.22C146.85,-239.92 129.68,-231.69 115,-223 98.32,-213.13 80.65,-200.27 67.36,-190.06"/><text text-anchor="middle" x="135" y="-211.8" font-family="Times,serif" font-size="14.00" fill="blue">gRPC</text></g><!-- session --><g id="node7" class="node"><title>session</title><polygon fill="#999999" stroke="blue" points="178,-190 98,-190 94,-186 94,-154 174,-154 178,-158 178,-190"/><polyline fill="none" stroke="blue" points="174,-186 94,-186 "/><polyline fill="none" stroke="blue" points="174,-186 174,-154 "/><polyline fill="none" stroke="blue" points="174,-186 178,-190 "/><text text-anchor="middle" x="136" y="-168.3" font-family="Times,serif" font-size="14.00" fill="blue">SESSION</text></g><!-- rest&#45;&#45;session --><g id="edge2" class="edge"><title>rest&#45;&#45;session</title><path fill="none" stroke="blue" d="M178.27,-240.8C169.08,-226.05 155.9,-204.92 146.71,-190.18"/><text text-anchor="middle" x="185" y="-211.8" font-family="Times,serif" font-size="14.00" fill="blue">gRPC</text></g><!-- product --><g id="node8" class="node"><title>product</title><polygon fill="#999999" stroke="blue" points="287.5,-190 200.5,-190 196.5,-186 196.5,-154 283.5,-154 287.5,-158 287.5,-190"/><polyline fill="none" stroke="blue" points="283.5,-186 196.5,-186 "/><polyline fill="none" stroke="blue" points="283.5,-186 283.5,-154 "/><polyline fill="none" stroke="blue" points="283.5,-186 287.5,-190 "/><text text-anchor="middle" x="242" y="-168.3" font-family="Times,serif" font-size="14.00" fill="blue">PRODUCT</text></g><!-- rest&#45;&#45;product --><g id="edge3" class="edge"><title>rest&#45;&#45;product</title><path fill="none" stroke="blue" d="M199.73,-240.8C208.92,-226.05 222.1,-204.92 231.29,-190.18"/><text text-anchor="middle" x="238" y="-211.8" font-family="Times,serif" font-size="14.00" fill="blue">gRPC</text></g><!-- stock --><g id="node9" class="node"><title>stock</title><polygon fill="#999999" stroke="blue" points="374,-190 310,-190 306,-186 306,-154 370,-154 374,-158 374,-190"/><polyline fill="none" stroke="blue" points="370,-186 306,-186 "/><polyline fill="none" stroke="blue" points="370,-186 370,-154 "/><polyline fill="none" stroke="blue" points="370,-186 374,-190 "/><text text-anchor="middle" x="340" y="-168.3" font-family="Times,serif" font-size="14.00" fill="blue">STOCK</text></g><!-- rest&#45;&#45;stock --><g id="edge4" class="edge"><title>rest&#45;&#45;stock</title><path fill="none" stroke="blue" d="M217.14,-245.49C230.87,-239.14 247.51,-231.08 262,-223 280.26,-212.82 300.09,-200.08 315.19,-190.01"/><text text-anchor="middle" x="306" y="-211.8" font-family="Times,serif" font-size="14.00" fill="blue">gRPC</text></g><!-- report --><g id="node11" class="node"><title>report</title><polygon fill="#999999" stroke="blue" points="353,-277 279,-277 275,-273 275,-241 349,-241 353,-245 353,-277"/><polyline fill="none" stroke="blue" points="349,-273 275,-273 "/><polyline fill="none" stroke="blue" points="349,-273 349,-241 "/><polyline fill="none" stroke="blue" points="349,-273 353,-277 "/><text text-anchor="middle" x="314" y="-255.3" font-family="Times,serif" font-size="14.00" fill="blue">REPORT</text></g><!-- rest&#45;&#45;report --><g id="edge5" class="edge"><title>rest&#45;&#45;report</title><path fill="none" stroke="blue" d="M217.05,-259C234.04,-259 255.96,-259 274.67,-259"/><text text-anchor="middle" x="246" y="-265.8" font-family="Times,serif" font-size="14.00" fill="blue">gRPC</text></g><!-- user&#45;&#45;db1 --><g id="edge6" class="edge"><title>user&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" d="M60.56,-153.84C74.76,-138.41 97.85,-116.59 123,-106 157.15,-91.62 174.88,-118.12 206,-98"/><text text-anchor="middle" x="143.5" y="-124.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">DB</text><text text-anchor="middle" x="143.5" y="-109.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">(Pool)</text></g><!-- session&#45;&#45;db1 --><g id="edge7" class="edge"><title>session&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" d="M151.39,-153.76C163.49,-140.43 180.92,-121.65 197,-106 200.84,-102.27 202.63,-102.16 206,-98"/><text text-anchor="middle" x="217.5" y="-124.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">DB</text><text text-anchor="middle" x="217.5" y="-109.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">(Pool)</text></g><!-- product&#45;&#45;db1 --><g id="edge8" class="edge"><title>product&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" d="M242,-153.78C242,-139.56 242,-118.48 242,-98"/><text text-anchor="middle" x="262.5" y="-124.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">DB</text><text text-anchor="middle" x="262.5" y="-109.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">(Pool)</text></g><!-- stock&#45;&#45;db1 --><g id="edge9" class="edge"><title>stock&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" d="M327.2,-153.81C316.88,-140.33 301.71,-121.35 287,-106 283.3,-102.14 281.37,-102.16 278,-98"/><text text-anchor="middle" x="332.5" y="-124.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">DB</text><text text-anchor="middle" x="332.5" y="-109.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">(Pool)</text></g><!-- runonce --><g id="node10" class="node"><title>runonce</title><polygon fill="#999999" stroke="blue" points="487.5,-190 396.5,-190 392.5,-186 392.5,-154 483.5,-154 487.5,-158 487.5,-190"/><polyline fill="none" stroke="blue" points="483.5,-186 392.5,-186 "/><polyline fill="none" stroke="blue" points="483.5,-186 483.5,-154 "/><polyline fill="none" stroke="blue" points="483.5,-186 487.5,-190 "/><text text-anchor="middle" x="440" y="-168.3" font-family="Times,serif" font-size="14.00" fill="blue">RUNONCE</text></g><!-- runonce&#45;&#45;db1 --><g id="edge10" class="edge"><title>runonce&#45;&#45;db1</title><path fill="none" stroke="magenta" d="M424.02,-153.87C408.51,-138.47 383.49,-116.66 357,-106 324.26,-92.82 307.59,-117.23 278,-98"/><text text-anchor="middle" x="431" y="-124.8" font-family="Times,serif" font-size="14.00" fill="magenta">DB</text><text text-anchor="middle" x="431" y="-109.8" font-family="Times,serif" font-size="14.00" fill="magenta">(Avulsa)</text></g></g></svg></div>
<h2 id="bibliotecas"><a class="header" href="#bibliotecas">Bibliotecas</a></h2>
<p>As bibliotecas planejadas para o sistema são:</p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-rpc</code>: Implementação de protocolos gRPC e de mensagens destes
protocolo. Deve ser importado em todos os módulos, sendo essencial para
a criação de clientes e servidores gRPC. Os modelos de comunicação
implementados para si devem ser também convertidos para e
a partir dos DTOs do módulo de dados.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-data</code>: Implementação de utilitários de comunicação com banco de
dados (PostgreSQL) e objetos de transferência de dados (DTOs). Deve ser
importado em todos os módulos, exceto na comunicação REST. Os DTOs também
devem implementar traits e utilitários para conversão das mensagens
implementadas em <code>minerva-rpc</code> para os DTOs desta biblioteca.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-cache</code>: Implementação de utilitários de comunicação com
cache, message brokers e armazenamento temporário <em>in-memory</em> (Redis).
Deve ser importado principalmente no módulo de sessão.</li>
</ul>
<h2 id="módulos"><a class="header" href="#módulos">Módulos</a></h2>
<p>Os módulos planejados para o sistema são:</p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-user</code>: Servidor gRPC para CRUD de usuários. Deve ser capaz de
manipular as regras de negócios relacionadas a clientes.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-session</code>: Servidor gRPC para gerência de sessão de usuário.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-product</code>: Servidor gRPC para CRUD de produtos. Deve ser capaz
de manipular as regras de negócios relacionadas a produtos, mas que não
envolvam controle de estoque.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-stock</code>: Servidor gRPC para CRUD de estoque de produtos. Deve
ser capaz de manipular as regras de negócios relacionadas a estoque, mas
que não envolvam manipulação de produtos.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-rest</code>: Servidor REST para comunicação com os demais módulos
executáveis. Possui rotas que apontam para serviços específicos, e é por
definição um cliente gRPC de todos os servidores gRPC.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-runonce</code>: Serviço <strong>avulso</strong> para configuração do ambiente, de
forma assíncrona. Responsável pela execução de migrações do banco de dados
e outras operações de configuração inicial.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-report</code>: Servidor gRPC para geração de relatórios. Deve receber
dados com formatação esperada de um relatório, e então deverá gerar um
arquivo PDF e retorná-lo inteiramente como resposta.</li>
</ul>
<h2 id="portas"><a class="header" href="#portas">Portas</a></h2>
<p>Os serviços, independente de serem gRPC ou REST, devem ser executados em
certas portas padrão para evitarem conflitos durante o tempo de depuração.
Cada porta deve também ser configurável através de variáveis de ambiente.</p>
<p>A tabela a seguir discrimina as variáveis de ambiente e as portas padrão
de acordo com o serviço em questão.</p>
<table><thead><tr><th>Serviço</th><th>Variável</th><th>Valor</th></tr></thead><tbody>
<tr><td>USER</td><td><code>USER_SERVICE_PORT</code></td><td>9010</td></tr>
<tr><td>SESSION</td><td><code>SESSION_SERVICE_PORT</code></td><td>9011</td></tr>
<tr><td>PRODUCT</td><td><code>PRODUCT_SERVICE_PORT</code></td><td>9012</td></tr>
<tr><td>STOCK</td><td><code>STOCK_SERVICE_PORT</code></td><td>9013</td></tr>
<tr><td>REPORT</td><td><code>REPORT_SERVICE_PORT</code></td><td>9014</td></tr>
<tr><td>REST</td><td><code>ROCKET_PORT</code></td><td>9000</td></tr>
</tbody></table>
<p>No caso do serviço REST, verifique o arquivo <code>Rocket.toml</code> para avaliar
a configuração em desenvolvimento e em produção do mesmo.</p>
<h2 id="gateways"><a class="header" href="#gateways">Gateways</a></h2>
<p>Os serviços também podem operar em máquinas diferentes, dependendo de sua
rota.</p>
<p>Normalmente, quando todos os serviços são executados manualmente na mesma
máquina, operamos com uma rota <code>localhost</code>. Nesse caso, a variável de
ambiente de cada serviço é definida como esse valor.</p>
<p>Todavia, num ambiente de orquestração de contêineres (como Docker Compose
ou Kubernetes), cada serviço estará operando de forma separada, e poderá
comunicar-se com os outros serviços por intermédio de uma rede interna
ao qual apenas os serviços têm acesso de forma explícita. Assim, as
variáveis de ambiente que determinam o nome do servidor devem ser definidas
manualmente, de acordo com a forma como o deploy de cada serviço foi
realizado.</p>
<p>A seguir, temos uma tabela relacionando variáveis de ambiente com seus
devidos valores, que serão resolvidos através do DNS da rede interna criada
pelo orquestrador de contêineres.</p>
<p>No caso do serviço REST, verifique o arquivo <code>Rocket.toml</code> para avaliar
a configuração em desenvolvimento e em produção do mesmo.</p>
<table><thead><tr><th>Serviço</th><th>Variável</th><th>Valor em Produção</th></tr></thead><tbody>
<tr><td>USER</td><td><code>USER_SERVICE_SERVER</code></td><td><code>users</code></td></tr>
<tr><td>Banco de Dados Relacional</td><td><code>DATABASE_SERVICE_SERVER</code></td><td><code>postgresql</code></td></tr>
<tr><td>Banco de Dados Não-Relacional</td><td><code>MONGO_SERVICE_SERVER</code></td><td><code>mongodb</code></td></tr>
<tr><td>REST</td><td>nenhuma</td><td><code>rest</code></td></tr>
<tr><td>RUNONCE</td><td>nenhuma</td><td><code>runonce</code></td></tr>
<tr><td>SESSION</td><td><code>SESSION_SERVICE_SERVER</code></td><td><code>session</code></td></tr>
</tbody></table>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="estrutura.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="multi-tenancy.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="estrutura.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="multi-tenancy.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
