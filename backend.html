<!DOCTYPE HTML>
<html lang="pt-br" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Back-End - Minerva System</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introdução</a></li><li class="chapter-item expanded "><a href="CHANGELOG.html"><strong aria-hidden="true">2.</strong> Changelog</a></li><li class="chapter-item expanded "><a href="estrutura.html"><strong aria-hidden="true">3.</strong> Estrutura geral do projeto</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Front-End</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="interface-plan9.html"><strong aria-hidden="true">3.1.1.</strong> Interface para Plan 9 from Bell Labs</a></li><li class="chapter-item expanded "><a href="interface-terminal.html"><strong aria-hidden="true">3.1.2.</strong> Interface para Terminal</a></li></ol></li><li class="chapter-item expanded "><a href="backend.html" class="active"><strong aria-hidden="true">3.2.</strong> Back-End</a></li></ol></li><li class="chapter-item expanded "><a href="documentacao.html"><strong aria-hidden="true">4.</strong> Documentação do Software</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Especificação do Projeto</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="multi-tenancy.html"><strong aria-hidden="true">5.1.</strong> Multi-Tenancy</a></li><li class="chapter-item expanded "><a href="banco-relacional.html"><strong aria-hidden="true">5.2.</strong> Banco de Dados Relacional</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="migrations.html"><strong aria-hidden="true">5.2.1.</strong> Executando migrations</a></li></ol></li><li class="chapter-item expanded "><a href="banco-nao-relacional.html"><strong aria-hidden="true">5.3.</strong> Banco de Dados Não-Relacional</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="colecoes.html"><strong aria-hidden="true">5.3.1.</strong> Coleções</a></li></ol></li><li class="chapter-item expanded "><a href="cache-redis.html"><strong aria-hidden="true">5.4.</strong> Cache via Redis</a></li><li class="chapter-item expanded "><a href="mensageria-rabbitmq.html"><strong aria-hidden="true">5.5.</strong> Mensageria via RabbitMQ</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.</strong> Diagramas</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="diagramas/casos-de-uso.html"><strong aria-hidden="true">5.6.1.</strong> Diagramas de Caso de Uso</a></li><li class="chapter-item expanded "><a href="diagramas-sequencia.html"><strong aria-hidden="true">5.6.2.</strong> Diagramas de Sequência</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.1.</strong> Inquilinos (TENANCY)</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.1.1.</strong> Listagem de nomes de inquilinos</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.1.2.</strong> Listagem de inquilinos</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.1.3.</strong> Criar inquilino</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.1.4.</strong> Desativar inquilino</div></li></ol></li><li class="chapter-item expanded "><a href="diagramas-sequencia-sessao.html"><strong aria-hidden="true">5.6.2.2.</strong> Sessão (SESSION)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="diagramas/login.html"><strong aria-hidden="true">5.6.2.2.1.</strong> Login do usuário</a></li><li class="chapter-item expanded "><a href="diagramas/logoff.html"><strong aria-hidden="true">5.6.2.2.2.</strong> Logoff do usuário</a></li></ol></li><li class="chapter-item expanded "><a href="diagramas-sequencia-usuarios.html"><strong aria-hidden="true">5.6.2.3.</strong> Usuários (USER)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="diagramas/cadastro-usuarios.html"><strong aria-hidden="true">5.6.2.3.1.</strong> Cadastro de usuários</a></li><li class="chapter-item expanded "><a href="diagramas/lista-usuarios.html"><strong aria-hidden="true">5.6.2.3.2.</strong> Listagem de usuários</a></li><li class="chapter-item expanded "><a href="diagramas/consultar-usuarios.html"><strong aria-hidden="true">5.6.2.3.3.</strong> Consultar usuário</a></li><li class="chapter-item expanded "><a href="diagramas/alteracao-usuarios.html"><strong aria-hidden="true">5.6.2.3.4.</strong> Alteração de cadastro de usuários</a></li><li class="chapter-item expanded "><a href="diagramas/remocao-usuarios.html"><strong aria-hidden="true">5.6.2.3.5.</strong> Remoção de usuários</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.4.</strong> Produtos (PRODUCT)</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.4.1.</strong> Cadastro de produtos</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.4.2.</strong> Listagem de produtos</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.4.3.</strong> Consultar produto</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.4.4.</strong> Alteração de cadastro de produtos</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.4.5.</strong> Remoção de produtos</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.5.</strong> Estoque (STOCK)</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.5.1.</strong> Início de estoque</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.5.2.</strong> Consulta de estoque</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.5.3.</strong> Listagem de estoques</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.5.4.</strong> Entrada de estoque</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.5.5.</strong> Saída de estoque</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.5.6.</strong> Listagem de movimentações de um estoque</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.6.</strong> Relatórios (REPORT)</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.6.1.</strong> Listagem de Entidades na tela</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.6.2.</strong> Listagem de Entidades em PDF</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.7.</strong> Clientes (CLIENT)</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.7.1.</strong> Cadastro de clientes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.7.2.</strong> Listagem de clientes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.7.3.</strong> Consultar cliente</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.7.4.</strong> Alteração de cadastro de cliente</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.7.5.</strong> Remoção de clientes</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.8.</strong> Auditoria (AUDIT)</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.8.1.</strong> Consultar logs de auditoria</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.9.</strong> Comunicação Instantânea (COMM)</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.9.1.</strong> Enviar mensagem via WhatsApp</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.9.2.</strong> Enviar mensagem via Facebook Messenger</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.9.3.</strong> Enviar mensagem via Instagram</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.2.9.4.</strong> Enviar mensagem via Telegram</div></li></ol></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="compilacao.html"><strong aria-hidden="true">6.</strong> Compilação</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="executar-maquina.html"><strong aria-hidden="true">6.1.</strong> Executar com recursos da máquina</a></li><li class="chapter-item expanded "><a href="gerando-imagens.html"><strong aria-hidden="true">6.2.</strong> Gerando imagens via Docker</a></li></ol></li><li class="chapter-item expanded "><a href="deploy.html"><strong aria-hidden="true">7.</strong> Deploy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="deploy-compose.html"><strong aria-hidden="true">7.1.</strong> Deploy via Docker Compose</a></li><li class="chapter-item expanded "><a href="deploy-swarm.html"><strong aria-hidden="true">7.2.</strong> Deploy via Docker Swarm + Vagrant</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="deploy-swarm-machine.html"><strong aria-hidden="true">7.2.1.</strong> Deploy via Docker Swarm + Docker Machine</a></li></ol></li><li class="chapter-item expanded "><a href="deploy-kubernetes.html"><strong aria-hidden="true">7.3.</strong> Deploy via Kubernetes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ferramentas-monitoramento-externas.html"><strong aria-hidden="true">7.3.1.</strong> Monitoramento externo</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="monitoramento-grafana.html"><strong aria-hidden="true">7.3.1.1.</strong> Grafana</a></li><li class="chapter-item expanded "><a href="monitoramento-mongodb.html"><strong aria-hidden="true">7.3.1.2.</strong> MongoDB Compass</a></li><li class="chapter-item expanded "><a href="monitoramento-redis.html"><strong aria-hidden="true">7.3.1.3.</strong> RESP.app (para Redis)</a></li><li class="chapter-item expanded "><a href="monitoramento-postgres.html"><strong aria-hidden="true">7.3.1.4.</strong> DBeaver CE (para PostgreSQL)</a></li><li class="chapter-item expanded "><a href="monitoramento-rabbitmq.html"><strong aria-hidden="true">7.3.1.5.</strong> RabbitMQ</a></li></ol></li><li class="chapter-item expanded "><a href="diagramas/diagrama-arquitetura.html"><strong aria-hidden="true">7.3.2.</strong> Diagramas de arquitetura do cluster</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="diagramas/rest.html"><strong aria-hidden="true">7.3.2.1.</strong> REST</a></li><li class="chapter-item expanded "><a href="diagramas/session.html"><strong aria-hidden="true">7.3.2.2.</strong> SESSION</a></li><li class="chapter-item expanded "><a href="diagramas/user.html"><strong aria-hidden="true">7.3.2.3.</strong> USER</a></li><li class="chapter-item expanded "><a href="diagramas/dispatch.html"><strong aria-hidden="true">7.3.2.4.</strong> DISPATCH</a></li><li class="chapter-item expanded "><a href="diagramas/postgresql.html"><strong aria-hidden="true">7.3.2.5.</strong> PostgreSQL</a></li><li class="chapter-item expanded "><a href="diagramas/mongodb.html"><strong aria-hidden="true">7.3.2.6.</strong> MongoDB</a></li><li class="chapter-item expanded "><a href="diagramas/redis.html"><strong aria-hidden="true">7.3.2.7.</strong> Redis</a></li><li class="chapter-item expanded "><a href="diagramas/rabbitmq.html"><strong aria-hidden="true">7.3.2.8.</strong> RabbitMQ</a></li><li class="chapter-item expanded "><a href="diagramas/prometheus.html"><strong aria-hidden="true">7.3.2.9.</strong> Prometheus</a></li><li class="chapter-item expanded "><a href="diagramas/grafana.html"><strong aria-hidden="true">7.3.2.10.</strong> Grafana</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.3.2.11.</strong> PgAdmin4</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.3.2.12.</strong> Mongo Express</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.3.2.13.</strong> Redis Commander</div></li></ol></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Minerva System</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="back-end"><a class="header" href="#back-end">Back-End</a></h1>
<style>
svg:not(:root ) {
      max-width: 100%;
	  height: auto;
}
</style>
<center>
<div><!-- Generated by graphviz version 5.0.0 (0)
 --><!-- Pages: 1 --><svg width="930pt" height="400pt"
 viewBox="0.00 0.00 930.00 400.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 396)"><g id="clust1" class="cluster"><title>cluster_db</title><polygon fill="transparent" stroke="darkmagenta" points="350,-8 350,-98 564,-98 564,-8 350,-8"/><text text-anchor="middle" x="457" y="-82.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">BANCO DE DADOS</text><text text-anchor="middle" x="457" y="-67.8" font-family="Times,serif" font-size="14.00" fill="darkmagenta">(multi&#45;tenant)</text></g><g id="clust3" class="cluster"><title>cluster_backend</title><polygon fill="transparent" stroke="darkred" points="8,-106 8,-202 914,-202 914,-106 8,-106"/></g><!-- frontend --><g id="node1" class="node"><title>frontend</title><polygon fill="transparent" stroke="darkorange" points="478,-392 340,-392 340,-320 484,-320 484,-386 478,-392"/><polyline fill="none" stroke="darkorange" points="478,-392 478,-386 "/><polyline fill="none" stroke="darkorange" points="484,-386 478,-386 "/><text text-anchor="middle" x="412" y="-352.3" font-family="Times,serif" font-size="14.00" fill="darkorange">FRONT&#45;END</text></g><!-- rest --><g id="node2" class="node"><title>rest</title><polygon fill="#999999" stroke="green" points="448,-284 380,-284 376,-280 376,-230 444,-230 448,-234 448,-284"/><polyline fill="none" stroke="green" points="444,-280 376,-280 "/><polyline fill="none" stroke="green" points="444,-280 444,-230 "/><polyline fill="none" stroke="green" points="444,-280 448,-284 "/><text text-anchor="middle" x="412" y="-260.8" font-family="Times,serif" font-size="14.00" fill="green">REST</text><text text-anchor="middle" x="412" y="-245.8" font-family="Times,serif" font-size="14.00" fill="green">(API)</text></g><!-- frontend&#45;&#45;rest --><g id="edge9" class="edge"><title>frontend&#45;&#45;rest</title><path fill="none" stroke="green" stroke-width="2" d="M412,-319.98C412,-308.15 412,-295.16 412,-284.14"/></g><!-- report --><g id="node7" class="node"><title>report</title><polygon fill="#999999" stroke="blue" points="808,-154 790,-190 754,-190 736,-154 754,-118 790,-118 808,-154"/><text text-anchor="middle" x="772" y="-150.3" font-family="Times,serif" font-size="14.00" fill="blue">REPORT</text></g><!-- rest&#45;&#45;report --><g id="edge18" class="edge"><title>rest&#45;&#45;report</title><path fill="none" stroke="blue" stroke-width="2" d="M448.35,-256.96C509.53,-257.06 635.38,-250.69 727,-202 735.58,-197.44 743.47,-190.64 750.17,-183.62"/></g><!-- tenancy --><g id="node8" class="node"><title>tenancy</title><polygon fill="#999999" stroke="blue" points="718,-154 700,-190 664,-190 646,-154 664,-118 700,-118 718,-154"/><text text-anchor="middle" x="682" y="-150.3" font-family="Times,serif" font-size="14.00" fill="blue">TENANCY</text></g><!-- rest&#45;&#45;tenancy --><g id="edge10" class="edge"><title>rest&#45;&#45;tenancy</title><path fill="none" stroke="blue" stroke-width="2" d="M448.21,-253.61C494.7,-249.18 576.56,-236.71 637,-202 645.42,-197.16 653.27,-190.27 659.97,-183.25"/></g><!-- user --><g id="node9" class="node"><title>user</title><polygon fill="#999999" stroke="blue" points="628,-154 610,-190 574,-190 556,-154 574,-118 610,-118 628,-154"/><text text-anchor="middle" x="592" y="-150.3" font-family="Times,serif" font-size="14.00" fill="blue">USER</text></g><!-- rest&#45;&#45;user --><g id="edge11" class="edge"><title>rest&#45;&#45;user</title><path fill="none" stroke="blue" stroke-width="2" d="M448.15,-246.17C476.57,-237.39 516.35,-222.69 547,-202 555.24,-196.44 563.13,-189.15 569.94,-181.97"/></g><!-- session --><g id="node10" class="node"><title>session</title><polygon fill="#999999" stroke="blue" points="538,-154 520,-190 484,-190 466,-154 484,-118 520,-118 538,-154"/><text text-anchor="middle" x="502" y="-150.3" font-family="Times,serif" font-size="14.00" fill="blue">SESSION</text></g><!-- rest&#45;&#45;session --><g id="edge12" class="edge"><title>rest&#45;&#45;session</title><path fill="none" stroke="blue" stroke-width="2" d="M435.18,-229.99C448.72,-214.79 465.74,-195.69 479.21,-180.57"/></g><!-- product --><g id="node11" class="node"><title>product</title><polygon fill="#999999" stroke="blue" points="448,-154 430,-190 394,-190 376,-154 394,-118 430,-118 448,-154"/><text text-anchor="middle" x="412" y="-150.3" font-family="Times,serif" font-size="14.00" fill="blue">PRODUCT</text></g><!-- rest&#45;&#45;product --><g id="edge13" class="edge"><title>rest&#45;&#45;product</title><path fill="none" stroke="blue" stroke-width="2" d="M412,-229.99C412,-217.83 412,-203.18 412,-190.06"/></g><!-- stock --><g id="node12" class="node"><title>stock</title><polygon fill="#999999" stroke="blue" points="358,-154 340,-190 304,-190 286,-154 304,-118 340,-118 358,-154"/><text text-anchor="middle" x="322" y="-150.3" font-family="Times,serif" font-size="14.00" fill="blue">STOCK</text></g><!-- rest&#45;&#45;stock --><g id="edge14" class="edge"><title>rest&#45;&#45;stock</title><path fill="none" stroke="blue" stroke-width="2" d="M388.82,-229.99C375.28,-214.79 358.26,-195.69 344.79,-180.57"/></g><!-- client --><g id="node13" class="node"><title>client</title><polygon fill="#999999" stroke="blue" points="268,-154 250,-190 214,-190 196,-154 214,-118 250,-118 268,-154"/><text text-anchor="middle" x="232" y="-150.3" font-family="Times,serif" font-size="14.00" fill="blue">CLIENT</text></g><!-- rest&#45;&#45;client --><g id="edge15" class="edge"><title>rest&#45;&#45;client</title><path fill="none" stroke="blue" stroke-width="2" d="M375.85,-246.17C347.43,-237.39 307.65,-222.69 277,-202 268.76,-196.44 260.87,-189.15 254.06,-181.97"/></g><!-- audit --><g id="node14" class="node"><title>audit</title><polygon fill="#999999" stroke="blue" points="178,-154 160,-190 124,-190 106,-154 124,-118 160,-118 178,-154"/><text text-anchor="middle" x="142" y="-150.3" font-family="Times,serif" font-size="14.00" fill="blue">AUDIT</text></g><!-- rest&#45;&#45;audit --><g id="edge16" class="edge"><title>rest&#45;&#45;audit</title><path fill="none" stroke="blue" stroke-width="2" d="M375.79,-253.61C329.3,-249.18 247.44,-236.71 187,-202 178.58,-197.16 170.73,-190.27 164.03,-183.25"/></g><!-- comm --><g id="node15" class="node"><title>comm</title><polygon fill="#999999" stroke="blue" points="88,-154 70,-190 34,-190 16,-154 34,-118 70,-118 88,-154"/><text text-anchor="middle" x="52" y="-150.3" font-family="Times,serif" font-size="14.00" fill="blue">COMM</text></g><!-- rest&#45;&#45;comm --><g id="edge17" class="edge"><title>rest&#45;&#45;comm</title><path fill="none" stroke="blue" stroke-width="2" d="M375.65,-256.96C314.47,-257.06 188.62,-250.69 97,-202 88.42,-197.44 80.53,-190.64 73.83,-183.62"/></g><!-- db2 --><g id="node3" class="node"><title>db2</title><path fill="#999999" stroke="darkmagenta" d="M556,-48.73C556,-50.53 543.9,-52 529,-52 514.1,-52 502,-50.53 502,-48.73 502,-48.73 502,-19.27 502,-19.27 502,-17.47 514.1,-16 529,-16 543.9,-16 556,-17.47 556,-19.27 556,-19.27 556,-48.73 556,-48.73"/><path fill="none" stroke="darkmagenta" d="M556,-48.73C556,-46.92 543.9,-45.45 529,-45.45 514.1,-45.45 502,-46.92 502,-48.73"/><text text-anchor="middle" x="529" y="-30.3" font-family="Times,serif" font-size="14.00" fill="darkmagenta">inq3</text></g><!-- db1 --><g id="node4" class="node"><title>db1</title><path fill="#999999" stroke="darkmagenta" d="M484,-48.73C484,-50.53 471.9,-52 457,-52 442.1,-52 430,-50.53 430,-48.73 430,-48.73 430,-19.27 430,-19.27 430,-17.47 442.1,-16 457,-16 471.9,-16 484,-17.47 484,-19.27 484,-19.27 484,-48.73 484,-48.73"/><path fill="none" stroke="darkmagenta" d="M484,-48.73C484,-46.92 471.9,-45.45 457,-45.45 442.1,-45.45 430,-46.92 430,-48.73"/><text text-anchor="middle" x="457" y="-30.3" font-family="Times,serif" font-size="14.00" fill="darkmagenta">inq2</text></g><!-- db3 --><g id="node5" class="node"><title>db3</title><path fill="#999999" stroke="darkmagenta" d="M412,-48.73C412,-50.53 399.9,-52 385,-52 370.1,-52 358,-50.53 358,-48.73 358,-48.73 358,-19.27 358,-19.27 358,-17.47 370.1,-16 385,-16 399.9,-16 412,-17.47 412,-19.27 412,-19.27 412,-48.73 412,-48.73"/><path fill="none" stroke="darkmagenta" d="M412,-48.73C412,-46.92 399.9,-45.45 385,-45.45 370.1,-45.45 358,-46.92 358,-48.73"/><text text-anchor="middle" x="385" y="-30.3" font-family="Times,serif" font-size="14.00" fill="darkmagenta">inq1</text></g><!-- runonce --><g id="node6" class="node"><title>runonce</title><ellipse fill="#dddddd" stroke="darkblue" cx="866" cy="-154" rx="36" ry="36"/><ellipse fill="none" stroke="darkblue" cx="866" cy="-154" rx="40" ry="40"/><text text-anchor="middle" x="866" y="-150.3" font-family="Times,serif" font-size="14.00" fill="darkblue">RUNONCE</text></g><!-- runonce&#45;&#45;db1 --><g id="edge6" class="edge"><title>runonce&#45;&#45;db1</title><path fill="none" stroke="magenta" stroke-width="2" d="M841.23,-122.53C834.16,-115.87 825.92,-109.72 817,-106 783.76,-92.16 523.92,-116.46 493,-98"/></g><!-- tenancy&#45;&#45;db1 --><g id="edge1" class="edge"><title>tenancy&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" stroke-width="2" d="M660.5,-123.72C653.8,-116.7 645.83,-110.06 637,-106 607.89,-92.6 520.26,-114.85 493,-98"/></g><!-- user&#45;&#45;db1 --><g id="edge2" class="edge"><title>user&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" stroke-width="2" d="M570.24,-124.25C563.54,-117.23 555.63,-110.46 547,-106 525.45,-94.86 513.03,-111.69 493,-98"/></g><!-- session&#45;&#45;db1 --><g id="edge3" class="edge"><title>session&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" stroke-width="2" d="M488.62,-117.92C486.21,-111.59 483.63,-104.83 481.02,-98"/></g><!-- product&#45;&#45;db1 --><g id="edge4" class="edge"><title>product&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" stroke-width="2" d="M425.38,-117.92C427.79,-111.59 430.37,-104.83 432.98,-98"/></g><!-- stock&#45;&#45;db1 --><g id="edge5" class="edge"><title>stock&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" stroke-width="2" d="M343.76,-124.25C350.46,-117.23 358.37,-110.46 367,-106 388.55,-94.86 400.97,-111.69 421,-98"/></g><!-- client&#45;&#45;db1 --><g id="edge7" class="edge"><title>client&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" stroke-width="2" d="M253.5,-123.72C260.2,-116.7 268.17,-110.06 277,-106 306.11,-92.6 393.74,-114.85 421,-98"/></g><!-- audit&#45;&#45;db1 --><g id="edge8" class="edge"><title>audit&#45;&#45;db1</title><path fill="none" stroke="darkmagenta" stroke-width="2" d="M163.44,-123.6C170.14,-116.57 178.13,-109.97 187,-106 210.75,-95.38 398.73,-111.44 421,-98"/></g></g></svg></div>
</center>
<div>
<div><!-- Generated by graphviz version 5.0.0 (0)
 --><!-- Pages: 1 --><svg width="214pt" height="128pt"
 viewBox="0.00 0.00 214.00 128.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 124)"><g id="clust1" class="cluster"><title>cluster_legenda</title><polygon fill="white" stroke="black" points="8,-8 8,-112 198,-112 198,-8 8,-8"/><text text-anchor="middle" x="103" y="-96.8" font-family="Times,serif" font-size="14.00">Legenda</text></g><!-- key --><g id="node1" class="node"><title>key</title><polygon fill="transparent" stroke="transparent" points="118,-81 16,-81 16,-16 118,-16 118,-81"/><text text-anchor="start" x="67" y="-63.3" font-family="Times,serif" font-size="14.00">gRPC &#160;</text><text text-anchor="start" x="81" y="-44.3" font-family="Times,serif" font-size="14.00">BD &#160;</text><text text-anchor="start" x="26" y="-25.3" font-family="Times,serif" font-size="14.00">HTTP/REST &#160;</text></g><!-- key2 --><g id="node2" class="node"><title>key2</title><polygon fill="transparent" stroke="transparent" points="190,-81 136,-81 136,-16 190,-16 190,-81"/><text text-anchor="start" x="161" y="-63.3" font-family="Times,serif" font-size="14.00"></text><text text-anchor="start" x="161" y="-44.3" font-family="Times,serif" font-size="14.00"></text><text text-anchor="start" x="161" y="-25.3" font-family="Times,serif" font-size="14.00"></text></g><!-- key&#45;&#45;key2 --><g id="edge1" class="edge"><title>key:e&#45;&#45;key2:w</title><path fill="none" stroke="blue" stroke-width="2" d="M111,-67.5C131.89,-67.5 137.11,-67.5 158,-67.5"/></g><!-- key&#45;&#45;key2 --><g id="edge2" class="edge"><title>key:e&#45;&#45;key2:w</title><path fill="none" stroke="darkmagenta" stroke-width="2" d="M111,-47.5C131.89,-47.5 137.11,-47.5 158,-47.5"/></g><!-- key&#45;&#45;key2 --><g id="edge3" class="edge"><title>key:e&#45;&#45;key2:w</title><path fill="none" stroke="green" stroke-width="2" d="M111,-28.5C131.89,-28.5 137.11,-28.5 158,-28.5"/></g></g></svg></div>
</div>
<p>O back-end Minerva compõe-se de microsserviços, com uma interface comum de
comunicação externa que seja simples de usar para os padrões atuais.</p>
<p>O back-end compõe-se dos seguintes componentes:</p>
<ol>
<li><strong>Componente de API:</strong> um serviço composto de rotas HTTP, sendo
portanto uma API REST. Este serviço requisita dados sob demanda a cada
serviço, dependendo do recurso que foi requisitado por via externa. É
efetivamente o intermediário entre Minerva e o mundo externo. As
requisições entre este serviço e os outros deverão ser feito através da
abertura de uma requisição gRPC em que este módulo seja o cliente
requisitante; as respostas recebidas via gRPC são então retornadas
como resposta às requisições recebidas via REST, após tratamento para
serialização como JSON.</li>
<li><strong>Componente de usuários:</strong> Servidor gRPC responsável por realizar o CRUD
de usuários e por verificar as regras de negócio destas operações.</li>
<li><strong>Componente de sessão:</strong> Servidor gRPC responsável por realizar login,
logoff, verificação de senha e gerenciamento de sessão de usuários.</li>
<li><strong>Componente de produtos:</strong> Servidor gRPC responsável por realizar o CRUD
de produtos e por verificar as regras de negócio destas operações.</li>
<li><strong>Componente de estoque:</strong> Servidor gRPC responsável por realizar regras
de negócios relacionadas a estoque de produtos (início, baixa, lançamento,
etc).</li>
<li><strong>Componente de inquilinos:</strong> Servidor gRPC responsável por coordenar a
criação ou remoção de novos inquilinos no sistema. Cada inquilino
possuirá seu próprio conjunto de dados, e isso afetará diretamente na
infraestrutura reservada para o mesmo (criação ou remoção de bancos
de dados ou segmentos específicos em certos serviços).</li>
<li><strong>Componente de relatórios:</strong> Servidor gRPC responsável pela geração de
relatórios humanamente legíveis, envolvendo portanto agregação de dados
de acordo com o que for externamente requisitado.</li>
<li><strong>Componente de clientes:</strong> Servidor gRPC responsável por realizar o CRUD
e a coordenação de dados de clientes do inquilino em questão.</li>
<li><strong>Componente de auditoria:</strong> Servidor gRPC responsável por gerenciar a
consulta ao logs de auditoria do sistema.</li>
<li><strong>Componente de comunicação instantânea:</strong> Servidor gRPC para CRM através
de comunicação via canais de mensagens instantâneas.</li>
</ol>
<p>Os <strong>serviços gRPC</strong> supracitados tratam-se de servidores gRPC que podem
receber conexões vindas do ponto de entrada REST ou mesmo entre si. Além
disso, os serviços gRPC devem ser capazes de se comunicar com bancos de
dados, que são recursos essenciais para os mesmos (exemplo: PostgreSQL,
MongoDB, Redis). <strong>Estes serviços devem gravar log de suas operações</strong>,
mais especificamente nas operações de inserção, atualização e exclusão.</p>
<p>A API REST sempre se comunica diretamente com os serviços gRPC, e os mesmos
são encorajados a se comunicarem entre si quando for necessário estabelecer
comunicação bloqueante entre os mesmos. Todavia, quando for necessário
estabelecer comunicação não-bloqueante entre os microsserviços (leia-se,
quando o retorno para os usuários for desnecessário), será feito o uso
de mensageria com despacho automático, sem comunicação gRPC direta.</p>
<h2 id="bibliotecas"><a class="header" href="#bibliotecas">Bibliotecas</a></h2>
<p>As bibliotecas planejadas para o sistema são:</p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-rpc</code>: Implementação de protocolos gRPC e de mensagens destes
protocolo. Deve ser importado em todos os módulos, sendo essencial para
a criação de clientes e servidores gRPC. Os modelos de comunicação
implementados para si devem ser também convertidos para e
a partir dos DTOs do módulo de dados.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-data</code>: Implementação de utilitários de comunicação com banco de
dados (PostgreSQL) e objetos de transferência de dados (DTOs). Deve ser
importado em todos os módulos, exceto na comunicação REST. Os DTOs também
devem implementar traits e utilitários para conversão das mensagens
implementadas em <code>minerva-rpc</code> para os DTOs desta biblioteca.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-cache</code>: Implementação de utilitários de comunicação com
cache e armazenamento temporário <em>in-memory</em> (Redis). Deve ser importado
principalmente no módulo de sessão.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-broker</code>: Implementação de utilitários de comunicação com
message brokers (RabbitMQ). Deve ser importado em qualquer módulo que
envolva processamento assíncrono, mas principalmente no módulo de despacho
de mensagens.</li>
</ul>
<h2 id="módulos"><a class="header" href="#módulos">Módulos</a></h2>
<p>Os módulos planejados para o sistema são:</p>
<ul>
<li><input disabled="" type="checkbox"/>
<code>minerva-tenancy</code>: Servidor gRPC para CRUD de inquilinos. Deve ser
capaz de gerenciar inquilinos, mas um inquilino não pode ser deletado
através desse serviço, apenas desativado. Apenas administradores do sistema
podem ter acesso.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-user</code>: Servidor gRPC para CRUD de usuários. Deve ser capaz de
manipular as regras de negócios relacionadas a clientes.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-session</code>: Servidor gRPC para gerência de sessão de usuário.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-product</code>: Servidor gRPC para CRUD de produtos. Deve ser capaz
de manipular as regras de negócios relacionadas a produtos, mas que não
envolvam controle de estoque.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-stock</code>: Servidor gRPC para CRUD de estoque de produtos. Deve
ser capaz de manipular as regras de negócios relacionadas a estoque, mas
que não envolvam manipulação de produtos.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-rest</code>: Servidor REST para comunicação com os demais módulos
executáveis. Possui rotas que apontam para serviços específicos, e é por
definição um cliente gRPC de todos os servidores gRPC.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-runonce</code>: Serviço <strong>avulso</strong> para configuração do ambiente, de
forma assíncrona. Responsável pela execução de migrações do banco de dados
e outras operações de configuração inicial.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-report</code>: Servidor gRPC para geração de relatórios. Deve receber
dados com formatação esperada de um relatório, e então deverá gerar um
arquivo PDF e retorná-lo inteiramente como resposta.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-client</code>: Servidor gRPC para CRUD de clientes. Deve ser capaz
de manipular as regras de negócios relacionadas a clientes.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-audit</code>: Servidor gRPC para gerenciamento de logs de auditoria.
Possibilita a consulta aos logs de auditoria do sistema.</li>
<li><input disabled="" type="checkbox"/>
<code>minerva-comm</code>: Servidor gRPC para comunicação externa com clientes
via mensagens instantâneas.</li>
<li><input disabled="" type="checkbox" checked=""/>
<code>minerva-dispatch</code>: Serviço de escuta de message broker e despacho de
mensagens para demais serviços.</li>
</ul>
<h2 id="portas"><a class="header" href="#portas">Portas</a></h2>
<p>Os serviços, independente de serem gRPC ou REST, devem ser executados em
certas portas padrão para evitarem conflitos durante o tempo de depuração.
Cada porta deve também ser configurável através de variáveis de ambiente.</p>
<p>A tabela a seguir discrimina as variáveis de ambiente e as portas padrão
de acordo com o serviço em questão.</p>
<div class="table-wrapper"><table><thead><tr><th>Serviço</th><th>Variável</th><th>Valor</th></tr></thead><tbody>
<tr><td>REST</td><td><code>ROCKET_PORT</code></td><td>9000</td></tr>
<tr><td>USER</td><td><code>USER_SERVICE_PORT</code></td><td>9010</td></tr>
<tr><td>SESSION</td><td><code>SESSION_SERVICE_PORT</code></td><td>9011</td></tr>
</tbody></table>
</div><!-- | PRODUCT | `PRODUCT_SERVICE_PORT` | 9012  | -->
<!-- | STOCK   | `STOCK_SERVICE_PORT`   | 9013  | -->
<!-- | REPORT  | `REPORT_SERVICE_PORT`  | 9014  | -->
<!-- | TENANCY | `TENANCY_SERVICE_PORT` | 9015  | -->
<!-- | CLIENT  | `CLIENT_SERVICE_PORT`  | 9016  | -->
<!-- | AUDIT   | `AUDIT_SERVICE_PORT`   | 9017  | -->
<!-- | COMM    | `COMM_SERVICE_PORT`    | 9018  | -->
<p>No caso do serviço REST, verifique o arquivo <code>Rocket.toml</code> para avaliar
a configuração em desenvolvimento e em produção do mesmo.</p>
<h2 id="gateways"><a class="header" href="#gateways">Gateways</a></h2>
<p>Os serviços também podem operar em máquinas diferentes, dependendo de sua
rota.</p>
<p>Normalmente, quando todos os serviços são executados manualmente na mesma
máquina, operamos com uma rota <code>localhost</code>. Nesse caso, a variável de
ambiente de cada serviço é definida como esse valor.</p>
<p>Todavia, num ambiente de orquestração de contêineres (como Docker Compose
ou Kubernetes), cada serviço estará operando de forma separada, e poderá
comunicar-se com os outros serviços por intermédio de uma rede interna
ao qual apenas os serviços têm acesso de forma explícita. Assim, as
variáveis de ambiente que determinam o nome do servidor devem ser definidas
manualmente, de acordo com a forma como o deploy de cada serviço foi
realizado.</p>
<p>A seguir, temos uma tabela relacionando os sistemas com sas variáveis de
ambiente. Os valores das variáveis serão definidos de acordo com o orquestrador
de contêineres sendo utilizado.</p>
<p>No caso do serviço REST, verifique o arquivo <code>Rocket.toml</code> para avaliar
a configuração em desenvolvimento e em produção do mesmo.</p>
<div class="table-wrapper"><table><thead><tr><th>Serviço</th><th>Variável de ambiente</th></tr></thead><tbody>
<tr><td>Banco de dados SQL</td><td><code>DATABASE_SERVICE_SERVER</code></td></tr>
<tr><td>Banco de dados NoSQL</td><td><code>MONGO_SERVICE_SERVER</code></td></tr>
<tr><td>Cache Redis</td><td><code>REDIS_SERVICE_SERVER</code></td></tr>
<tr><td>Message Broker RabbitMQ</td><td><code>RABBITMQ_SERVICE_SERVER</code></td></tr>
<tr><td>-------------------------</td><td>---------------------------</td></tr>
<tr><td>REST</td><td><code>REST_SERVICE_SERVER</code></td></tr>
<tr><td>USER</td><td><code>USER_SERVICE_SERVER</code></td></tr>
<tr><td>SESSION</td><td><code>SESSION_SERVICE_SERVER</code></td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="interface-terminal.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="documentacao.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="interface-terminal.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="documentacao.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
